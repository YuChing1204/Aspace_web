{"ast":null,"code":"var _jsxFileName = \"/Users/jeanchu/Documents/Aspace_web/aspace-app/src/components/reserve_component.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from 'react-router-dom';\nimport PropertyService from \"../services/property.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReserveComponent = props => {\n  _s();\n  let {\n    currentUser,\n    setCurrentUser\n  } = props;\n  const navigate = useNavigate();\n  const handleTakeToLogin = () => {\n    navigate(\"/login\");\n  };\n  let [propertyData, setPropertyData] = useState(null);\n  let [reservationData, setReservationData] = useState(null);\n  useEffect(() => {\n    console.log(\"Using effect.\");\n    let _id;\n    if (currentUser) {\n      _id = currentUser.user._id;\n    } else {\n      _id = \"\";\n    }\n    PropertyService.getReservation(_id).then(data => {\n      console.log(data.data);\n      setReservationData(data.data);\n      // data.data.map((reservation) => {\n      // console.log(reservation.propertyId)\n      // PropertyService.getProperty(reservation.propertyId)\n      // .then((property) => \n      // console.log(property.data[0]))\n      // .catch((err)=>{console.log(err);})\n      // });\n      // setPropertyData(data.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  //delete\n  const handleDelete = e => {\n    PropertyService.deleteReservation(e.target.id, currentUser.user._id).then(() => {\n      window.alert(\"Delete Reservation!\");\n      window.location.reload();\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"3rem\"\n    },\n    children: [!currentUser && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"You must login before seeing your reservations.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleTakeToLogin,\n        className: \"btn btn-primary btn-lg\",\n        children: \"Take me to login page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }, this), currentUser && currentUser.user.role === \"guest\" && reservationData && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Here's your reservations.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }, this), reservationData.map(reservation =>\n      /*#__PURE__*/\n      // console.log(reservation.date)\n      _jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"...\",\n          class: \"card-img-top\",\n          alt: \"...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            class: \"card-title\",\n            children: [\"PropertyId: \", reservation.propertyId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            class: \"card-text\",\n            children: [\"Reservation date: \", reservation.date.split(\"T\")[0]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleDelete,\n            id: reservation._id,\n            class: \"btn btn-primary\",\n            children: \"Cancellation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 33\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 29\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(ReserveComponent, \"srBzGI9Q8bStr5Ayo2QymBg/6kw=\", false, function () {\n  return [useNavigate];\n});\n_c = ReserveComponent;\nexport default ReserveComponent;\nvar _c;\n$RefreshReg$(_c, \"ReserveComponent\");","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","PropertyService","ReserveComponent","props","currentUser","setCurrentUser","navigate","handleTakeToLogin","propertyData","setPropertyData","reservationData","setReservationData","console","log","_id","user","getReservation","then","data","catch","err","handleDelete","e","deleteReservation","target","id","window","alert","location","reload","padding","role","map","reservation","propertyId","date","split"],"sources":["/Users/jeanchu/Documents/Aspace_web/aspace-app/src/components/reserve_component.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link, useNavigate } from 'react-router-dom';\nimport PropertyService from \"../services/property.service\";\n\nconst ReserveComponent = (props) => {\n    let { currentUser, setCurrentUser } = props;\n    const navigate = useNavigate();\n\n    const handleTakeToLogin = () => {\n        navigate(\"/login\");\n      };\n    \n    let [propertyData, setPropertyData] = useState(null);\n    let [reservationData, setReservationData] = useState(null);\n\n    useEffect(() => {\n        console.log(\"Using effect.\");\n        let _id;\n        if (currentUser) {\n          _id = currentUser.user._id;\n        } else {\n          _id = \"\";\n        }\n\n        PropertyService.getReservation(_id)\n        .then((data) => {\n            console.log(data.data);\n            setReservationData(data.data);\n            // data.data.map((reservation) => {\n                // console.log(reservation.propertyId)\n                // PropertyService.getProperty(reservation.propertyId)\n                // .then((property) => \n                // console.log(property.data[0]))\n                // .catch((err)=>{console.log(err);})\n            // });\n            // setPropertyData(data.data);\n        })\n        .catch((err) => {\n            console.log(err);\n        });\n\n      }, []);\n\n    //delete\n    const handleDelete = (e) => {\n        PropertyService.deleteReservation(e.target.id, currentUser.user._id)\n        .then(() => {\n          window.alert(\"Delete Reservation!\");\n          window.location.reload();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n      };\n\n\nreturn (\n    <div style={{ padding: \"3rem\" }}>\n        {!currentUser && (\n                <div>\n                <p>You must login before seeing your reservations.</p>\n                <button\n                    onClick={handleTakeToLogin}\n                    className=\"btn btn-primary btn-lg\"\n                >\n                    Take me to login page\n                </button>\n                </div>\n        )}\n\n        {currentUser && currentUser.user.role === \"guest\" && reservationData &&(\n                    <div>\n                        <h2>Here's your reservations.</h2>\n                        {reservationData.map((reservation) => (\n                            // console.log(reservation.date)\n                            <div> \n                                <img src=\"...\" class=\"card-img-top\" alt=\"...\" />\n                                <div class=\"card-body\">\n                                    <h5 class=\"card-title\">PropertyId: {reservation.propertyId}</h5>\n                                    <p class=\"card-text\">Reservation date: {reservation.date.split(\"T\")[0]}</p>\n                                    <button onClick={handleDelete} id={reservation._id} class=\"btn btn-primary\">Cancellation</button>\n                                </div>\n                            </div>\n                        ))}\n                        {/* {propertyData.map((property) => (\n                            <div className=\"card\" style={{ width: \"18rem\" }}>\n                                <div className=\"card-body\">\n                                <img src={`data:image/jepg;base64,${property.image}`} alt=\"property\" width={\"250rem\"} height={\"250rem\"} />\n                                    <h5 className=\"card-title\">{property.title}</h5>\n                                    <h3>{property.city}</h3>\n                                    <p className=\"card-text\">{property.description}</p>\n                                    <p className=\"card-text\">$ {property.price} per day</p>\n                                    <Link to={`/editproperty/${property._id}`} className=\"btn btn-secondary\">Edit</Link>\n                                    <br />\n                                </div>\n                            </div>\n                        ))} */}\n                    </div>\n                )}\n        </div>\n  );\n}\n\nexport default ReserveComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module"}